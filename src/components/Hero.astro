---
const { site } = Astro.props;
import IconBadge from "./IconBadge.astro";
const hero = site.hero ?? {};
const cards = (site.whatWeDo?.items ?? []).slice(0,4);
const iconByTitle = (title = "") => {
  const t = title.toLowerCase();
  if (t.includes("managed it")) return "server";
  if (t.includes("security")) return "shield";
  if (t.includes("dental")) return "monitor";
  if (t.includes("local")) return "people";
  return "tools";
};
---
<header id="home" class="nb-anchor-offset nb-hero">
  <div class="container py-5">
    <div class="row align-items-center g-4 py-4">
      <div class="col-lg-7">
        <div class="nb-pill mb-3">{hero.eyebrow}</div>
        <h1 class="display-5 fw-bold mb-2">{hero.headline}</h1>
        <p class="lead text-white-50 mb-4">{hero.subheadline}</p>
        <div class="d-flex flex-wrap gap-2">
          <a class="btn nb-btn-primary nb-btn-inlineicon" href={site.bookings?.url} target="_blank" rel="noopener">
            <span class="nb-btn-icon"><IconBadge name="calendar" className="nb-icon-sm" /></span>
            <span>{hero.primaryCta ?? "Book a consultation"}</span>
          </a>
          <a class="btn nb-btn-ghost nb-btn-inlineicon nb-call-hero-btn" href="#contact">
            <span class="nb-btn-icon">☎</span>
            <span>Call Us</span>
          </a>
        </div>
        <p class="small text-white-50 mt-3 mb-0">Serving Richmond, NOVA, and statewide Virginia • HIPAA-aware • Dental workflow support</p>
      </div>
      <div class="col-lg-5">
        <div class="p-3 p-md-4 nb-hero-panel">
          <h2 class="h5 fw-bold mb-3">{site.whatWeDo?.title ?? "What We Do"}</h2>
          <div class="d-grid gap-2">
            {cards.map((x) => (
              <div class="nb-card nb-pop nb-hero-mini-card">
                <div class="nb-icon-row">
                  <div class="nb-icon-wrap"><IconBadge name={iconByTitle(x.title)} /></div>
                  <div>
                    <div class="fw-semibold">{x.title}</div>
                    <div class="small text-secondary">{x.text}</div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
