---
import IconBadge from './IconBadge.astro';
const { site } = Astro.props;
const items = site?.whatWeDo?.items ?? [];
const fallbackIcons = ['monitor', 'lockshield', 'tools', 'mappin'];
---
<section id="home" class="nb-hero-wrap nb-anchor-offset">
  <div class="nb-shell nb-hero-grid">
    <div class="nb-hero-copy">
      <p class="nb-eyebrow">{site?.hero?.eyebrow}</p>
      <h1 class="nb-hero-title">{site?.hero?.headline}</h1>
      <p class="nb-hero-subtitle">{site?.hero?.subheadline}</p>
      <div class="nb-hero-actions">
        <a class="nb-btn-primary" href="#contact">
          <svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="5" width="18" height="16" rx="2" ry="2" fill="none" stroke="currentColor" stroke-width="2"/><path d="M16 3v4M8 3v4M3 10h18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          <span>{site?.hero?.primaryCta || 'Book a Consultation'}</span>
        </a>
        <a class="nb-btn-ghost" href="#contact">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6.8 10.7a15.5 15.5 0 0 0 6.5 6.5l2.2-2.2a1 1 0 0 1 1-.24 11.1 11.1 0 0 0 3.45.55 1 1 0 0 1 1 1V20a1 1 0 0 1-1 1C10.9 21 3 13.1 3 3.5a1 1 0 0 1 1-1H7.5a1 1 0 0 1 1 1c0 1.19.18 2.34.54 3.44a1 1 0 0 1-.23 1l-2.01 2.26Z" fill="none" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span>{site?.hero?.secondaryCta || 'Call Us'}</span>
        </a>
      </div>
    </div>

    <aside class="nb-what-card" aria-label="What we do">
      <h2>{site?.whatWeDo?.title || 'What We Do'}</h2>
      <div class="nb-what-grid">
        {items.map((item, idx) => (
          <article class="nb-what-item nb-hover-pop">
            <div class="nb-icon-wrap nb-icon-wrap--hero">
              <IconBadge name={item.icon || fallbackIcons[idx] || 'shield'} />
            </div>
            <div>
              <h3>{item.title}</h3>
              <p>{item.text}</p>
            </div>
          </article>
        ))}
      </div>
    </aside>
  </div>
</section>
