---
import IconBadge from './IconBadge.astro';
const { site } = Astro.props;
const groups = site?.services?.groups ?? [];
const mainGroups = groups.slice(0, 4);
const networkGroup = groups[4];
const iconFor = (title) => {
  const t = (title || '').toLowerCase();
  if (t.includes('managed')) return 'monitor';
  if (t.includes('emr') || t.includes('clinical')) return 'users';
  if (t.includes('microsoft') || t.includes('cloud')) return 'cloud';
  if (t.includes('security')) return 'shield';
  if (t.includes('network') || t.includes('wifi') || t.includes('voip')) return 'server';
  return 'tools';
};
---
<section id="services" class="nb-section nb-anchor-offset">
  <div class="nb-shell">
    <h2 class="nb-section-title">{site?.services?.title || 'Services'}</h2>
    <div class="nb-services-grid">
      {mainGroups.map((group) => (
        <article class="nb-service-card nb-hover-pop">
          <div class="nb-service-head">
            <IconBadge icon={iconFor(group.title)} />
            <h3>{group.title}</h3>
          </div>
          <ul>
            {group.items?.map((item) => <li>{item}</li>)}
          </ul>
          <a class="nb-service-link" href="#contact">Request more info</a>
        </article>
      ))}

      {networkGroup && (
        <article class="nb-service-card nb-service-card-wide nb-hover-pop">
          <div class="nb-service-head">
            <IconBadge icon={iconFor(networkGroup.title)} />
            <h3>{networkGroup.title}</h3>
          </div>
          <div class="nb-service-cols">
            <ul>
              {networkGroup.items?.slice(0, Math.ceil(networkGroup.items.length / 2)).map((item) => <li>{item}</li>)}
            </ul>
            <ul>
              {networkGroup.items?.slice(Math.ceil(networkGroup.items.length / 2)).map((item) => <li>{item}</li>)}
            </ul>
          </div>
          <a class="nb-service-link" href="#contact">Request more info</a>
        </article>
      )}
    </div>
  </div>
</section>
