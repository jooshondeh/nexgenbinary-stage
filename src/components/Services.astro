---
import IconBadge from "./IconBadge.astro";
const { site } = Astro.props;
const s = site.services ?? { groups: [] };
const groups = (s.groups ?? []).map((g) => ({
  ...g,
  features: g.features ?? g.items ?? [],
  text: g.text ?? g.description ?? "",
}));
---
<section id="services" class="nb-section nb-soft-bg">
  <div class="nb-shell">
    <div class="nb-section-head">
      <h2>{s.title ?? 'Services'}</h2>
      {s.subtitle && <p>{s.subtitle}</p>}
    </div>
    <div class="nb-services-grid">
      {groups.map((group, i) => {
        const wide = i === groups.length - 1;
        return (
          <article class={`nb-service-card nb-pop ${wide ? 'is-wide' : ''}`}>
            <div class="nb-service-head">
              <IconBadge name={group.icon} class="lg" />
              <div>
                <h3>{group.title}</h3>
                {group.text && <p>{group.text}</p>}
              </div>
            </div>
            <div class={`nb-service-features ${wide ? 'two-col' : ''}`}>
              {(group.features ?? []).map((f) => <div class="nb-service-chip">{f}</div>)}
            </div>
          </article>
        );
      })}
    </div>
  </div>
</section>
