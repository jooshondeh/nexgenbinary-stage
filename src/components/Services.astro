---
import IconBadge from './IconBadge.astro';
const { site } = Astro.props;
const s = site.services ?? {};
const cards = (s.cards ?? []).map((card, idx, arr) => {
  const mid = Math.ceil((card.items?.length ?? 0) / 2);
  return {
    ...card,
    wide: idx === arr.length - 1,
    leftItems: (card.items ?? []).slice(0, mid),
    rightItems: (card.items ?? []).slice(mid)
  };
});
const iconMap = ['monitor','shield','cloud','wifi'];
---
<section id="services" class="nb-anchor-offset nb-section" style="background:#f8fafc">
  <div class="container">
    <div class="row g-4 align-items-start">
      <div class="col-lg-4">
        <h2 class="section-title fw-bold">{s.title}</h2>
        <p class="text-secondary mt-3">{s.lead}</p>
      </div>
      <div class="col-lg-8">
        <div class="row g-3">
          {cards.map((card, idx) => (
            <div class={card.wide ? 'col-12' : 'col-md-6'}>
              <div class={`nb-card p-3 p-md-4 nb-pop h-100 ${card.wide ? 'nb-wide-service' : ''}`}>
                <div class="d-flex align-items-start gap-3">
                  <div class="nb-icon-wrap nb-icon-orange"><IconBadge name={iconMap[idx] || 'shield'} /></div>
                  <div class="flex-grow-1 min-w-0">
                    <h3 class="h5 fw-bold mb-2">{card.title}</h3>
                    <a class="btn nb-btn-primary btn-sm mb-3 nb-btn-inlineicon" href="#contact">
                      <span class="nb-icon"><IconBadge name="mail" /></span>
                      <span>Request more info</span>
                    </a>
                    {card.wide ? (
                      <div class="row g-2">
                        <div class="col-md-6"><ul class="nb-list mb-0">{card.leftItems.map((it) => <li>{it}</li>)}</ul></div>
                        <div class="col-md-6"><ul class="nb-list mb-0">{card.rightItems.map((it) => <li>{it}</li>)}</ul></div>
                      </div>
                    ) : (
                      <ul class="nb-list mb-0">{card.items.map((it) => <li>{it}</li>)}</ul>
                    )}
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</section>
